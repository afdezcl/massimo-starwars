{"version":3,"sources":["webpack://JestMarbles/webpack/universalModuleDefinition","webpack://JestMarbles/webpack/bootstrap","webpack://JestMarbles/external \"jest-matcher-utils\"","webpack://JestMarbles/external \"rxjs\"","webpack://JestMarbles/external \"rxjs/internal/testing/SubscriptionLog\"","webpack://JestMarbles/external \"jest-diff\"","webpack://JestMarbles/external \"rxjs/internal/testing/TestScheduler\"","webpack://JestMarbles/external \"expect/build/jasmineUtils\"","webpack://JestMarbles/./src/marbles-glossary.ts","webpack://JestMarbles/./src/notification-event.ts","webpack://JestMarbles/./src/notification-kind.ts","webpack://JestMarbles/./src/marblizer.ts","webpack://JestMarbles/./src/jest/custom-matchers.ts","webpack://JestMarbles/./src/rxjs/assert-deep-equal.ts","webpack://JestMarbles/./src/rxjs/scheduler.ts","webpack://JestMarbles/./src/rxjs/cold-observable.ts","webpack://JestMarbles/./src/rxjs/hot-observable.ts","webpack://JestMarbles/./src/rxjs/strip-alignment-chars.ts","webpack://JestMarbles/./index.ts"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","MarblesGlossary","start","marbles","length","ValueLiteral","NotificationKindChars","N","C","Completion","E","Error","marblize","messages","emissions","Marblizer","getNotificationEvents","prevEndFrame","end","TimeFrame","repeat","marblizeSubscriptions","logs","map","log","subscribedFrame","Subscription","unsubscribedFrame","Unsubscription","framesToEmissions","reduce","result","message","frame","NotificationEvent","extractMarble","events","keys","encloseGroupEvents","marble","notification","kind","forEach","event","GroupStart","GroupEnd","isCharacter","undefined","JSON","stringify","customTestMatchers","toBeNotifications","actual","expected","actualMarble","expectedMarble","every","filter","canMarblize","pass","diffString","expand","toBeSubscriptions","actualMarbleArray","expectedMarbleArray","includes","subscriptionsPass","toHaveEmptySubscriptions","assertDeepEqual","actualIsSubscriptionsAndExpectedIsEmpty","expectedIsSubscriptionLogArray","expect","extend","init","Scheduler","instance","reset","materializeInnerObservable","observable","outerFrame","values","error","source","createColdObservable","getSubscriptions","subscriptions","createHotObservable","stripAlignmentChars","replace","hot","cold","time","createTime","dummyResult","toHaveSubscriptions","sanitizedMarbles","Array","isArray","expectSubscriptions","toBe","toHaveNoSubscriptions","toBeObservable","expectObservable","toBeMarble","toSatisfyOnFlush","func","flushTests","ready","onFlush","push","beforeEach","afterEach","flush","shift"],"mappings":"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","file":"jest-marbles.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jest-matcher-utils\"), require(\"rxjs\"), require(\"rxjs/internal/testing/SubscriptionLog\"), require(\"jest-diff\"), require(\"rxjs/internal/testing/TestScheduler\"), require(\"expect/build/jasmineUtils\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"JestMarbles\", [\"jest-matcher-utils\", \"rxjs\", \"rxjs/internal/testing/SubscriptionLog\", \"jest-diff\", \"rxjs/internal/testing/TestScheduler\", \"expect/build/jasmineUtils\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"JestMarbles\"] = factory(require(\"jest-matcher-utils\"), require(\"rxjs\"), require(\"rxjs/internal/testing/SubscriptionLog\"), require(\"jest-diff\"), require(\"rxjs/internal/testing/TestScheduler\"), require(\"expect/build/jasmineUtils\"));\n\telse\n\t\troot[\"JestMarbles\"] = factory(root[\"jest-matcher-utils\"], root[\"rxjs\"], root[\"rxjs/internal/testing/SubscriptionLog\"], root[\"jest-diff\"], root[\"rxjs/internal/testing/TestScheduler\"], root[\"expect/build/jasmineUtils\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__5__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","export enum MarblesGlossary {\n  Completion = '|',\n  Error = '#',\n  TimeFrame = '-',\n  Subscription = '^',\n  Unsubscription = '!',\n  GroupStart = '(',\n  GroupEnd = ')',\n}\n","export class NotificationEvent {\n  marbles = '';\n  constructor(public start: number) {}\n  get end(): number {\n    return this.start + this.marbles.length;\n  }\n}\n","import { MarblesGlossary } from './marbles-glossary';\nimport { Notification } from 'rxjs';\nexport const ValueLiteral = {};\n\nexport type NotificationKind = Notification<any>['kind'];\n\nexport const NotificationKindChars: { [key in NotificationKind]: any } = {\n  N: ValueLiteral,\n  C: MarblesGlossary.Completion,\n  E: MarblesGlossary.Error,\n};\n","import { SubscriptionLog } from 'rxjs/internal/testing/SubscriptionLog';\nimport { TestMessage } from 'rxjs/internal/testing/TestMessage';\nimport { MarblesGlossary } from './marbles-glossary';\nimport { NotificationEvent } from './notification-event';\nimport { NotificationKindChars, ValueLiteral } from './notification-kind';\n\nconst frameStep = 10;\n\nexport class Marblizer {\n  public static marblize(messages: TestMessage[]): string {\n    const emissions = Marblizer.getNotificationEvents(messages);\n    let marbles = '';\n    for (let i = 0, prevEndFrame = 0; i < emissions.length; prevEndFrame = emissions[i].end, i++) {\n      marbles = `${marbles}${MarblesGlossary.TimeFrame.repeat(emissions[i].start - prevEndFrame) +\n        emissions[i].marbles}`;\n    }\n    return marbles;\n  }\n\n  public static marblizeSubscriptions(logs: SubscriptionLog[]): string[] {\n    return logs.map(\n      log =>\n        MarblesGlossary.TimeFrame.repeat(log.subscribedFrame / frameStep) +\n        MarblesGlossary.Subscription +\n        MarblesGlossary.TimeFrame.repeat((log.unsubscribedFrame - log.subscribedFrame) / frameStep - 1) +\n        MarblesGlossary.Unsubscription\n    );\n  }\n\n  private static getNotificationEvents(messages: TestMessage[]) {\n    const framesToEmissions = messages.reduce<{ [frame: number]: NotificationEvent }>((result, message) => {\n      if (!result[message.frame]) {\n        result[message.frame] = new NotificationEvent(message.frame / frameStep);\n      }\n      const event = result[message.frame];\n      event.marbles += Marblizer.extractMarble(message);\n      return result;\n    }, {});\n\n    const events = Object.keys(framesToEmissions).map<NotificationEvent>(frame => framesToEmissions[frame]);\n\n    Marblizer.encloseGroupEvents(events);\n    return events;\n  }\n\n  private static extractMarble(message: TestMessage) {\n    let marble = NotificationKindChars[message.notification.kind];\n    if (marble === ValueLiteral) marble = message.notification.value;\n    return marble;\n  }\n\n  private static encloseGroupEvents(events: NotificationEvent[]) {\n    events.forEach(event => {\n      if (event.marbles.length > 1) {\n        event.marbles = `${MarblesGlossary.GroupStart}${event.marbles}${MarblesGlossary.GroupEnd}`;\n      }\n    });\n  }\n}\n","import { equals } from 'expect/build/jasmineUtils';\nimport * as diff from 'jest-diff';\nimport { matcherHint, printExpected, printReceived } from 'jest-matcher-utils';\nimport { SubscriptionLog } from 'rxjs/internal/testing/SubscriptionLog';\nimport { TestMessage } from 'rxjs/internal/testing/TestMessage';\nimport { Marblizer } from '../marblizer';\n\nfunction canMarblize(...messages: TestMessage[][]) {\n  return messages.every(message => message.filter(({ notification: { kind } }) => kind === 'N').every(isCharacter));\n}\n\nfunction isCharacter({ notification: { value } }: TestMessage): boolean {\n  return (\n    (typeof value === 'string' && value.length === 1) || (value !== undefined && JSON.stringify(value).length === 1)\n  );\n}\n\nexport const customTestMatchers = {\n  toBeNotifications(actual: TestMessage[], expected: TestMessage[]) {\n    let actualMarble: string | TestMessage[] = actual;\n    let expectedMarble: string | TestMessage[] = expected;\n    if (canMarblize(actual, expected)) {\n      actualMarble = Marblizer.marblize(actual);\n      expectedMarble = Marblizer.marblize(expected);\n    }\n\n    const pass = equals(actualMarble, expectedMarble);\n\n    const message = pass\n      ? () =>\n          matcherHint('.not.toBeNotifications') +\n          '\\n\\n' +\n          `Expected notifications to not be:\\n` +\n          `  ${printExpected(expectedMarble)}\\n` +\n          `But got:\\n` +\n          `  ${printReceived(actualMarble)}`\n      : () => {\n          const diffString = diff(expectedMarble, actualMarble, {\n            expand: true,\n          });\n          return (\n            matcherHint('.toBeNotifications') +\n            '\\n\\n' +\n            `Expected notifications to be:\\n` +\n            `  ${printExpected(expectedMarble)}\\n` +\n            `But got:\\n` +\n            `  ${printReceived(actualMarble)}` +\n            (diffString ? `\\n\\nDifference:\\n\\n${diffString}` : '')\n          );\n        };\n\n    return { actual, message, pass };\n  },\n\n  toBeSubscriptions(actual: SubscriptionLog[], expected: SubscriptionLog[]) {\n    const actualMarbleArray = Marblizer.marblizeSubscriptions(actual);\n    const expectedMarbleArray = Marblizer.marblizeSubscriptions(expected);\n\n    const pass = subscriptionsPass(actualMarbleArray, expectedMarbleArray);\n    const message = pass\n      ? () =>\n          matcherHint('.not.toHaveSubscriptions') +\n          '\\n\\n' +\n          `Expected observable to not have the following subscription points:\\n` +\n          `  ${printExpected(expectedMarbleArray)}\\n` +\n          `But got:\\n` +\n          `  ${printReceived(actualMarbleArray)}`\n      : () => {\n          const diffString = diff(expectedMarbleArray, actualMarbleArray, {\n            expand: true,\n          });\n          return (\n            matcherHint('.toHaveSubscriptions') +\n            '\\n\\n' +\n            `Expected observable to have the following subscription points:\\n` +\n            `  ${printExpected(expectedMarbleArray)}\\n` +\n            `But got:\\n` +\n            `  ${printReceived(actualMarbleArray)}` +\n            (diffString ? `\\n\\nDifference:\\n\\n${diffString}` : '')\n          );\n        };\n\n    return { actual, message, pass };\n  },\n\n  toHaveEmptySubscriptions(actual: SubscriptionLog[] | undefined) {\n    const pass = !(actual && actual.length > 0);\n    let marbles: string[];\n    if (actual && actual.length > 0) {\n      marbles = Marblizer.marblizeSubscriptions(actual);\n    }\n    const message = pass\n      ? () =>\n          matcherHint('.not.toHaveNoSubscriptions') +\n          '\\n\\n' +\n          `Expected observable to have at least one subscription point, but got nothing` +\n          printReceived('')\n      : () =>\n          matcherHint('.toHaveNoSubscriptions') +\n          '\\n\\n' +\n          `Expected observable to have no subscription points\\n` +\n          `But got:\\n` +\n          `  ${printReceived(marbles)}\\n\\n`;\n    return { actual, message, pass };\n  },\n};\n\nfunction subscriptionsPass(actualMarbleArray: string[], expectedMarbleArray: string[]): boolean {\n  if (actualMarbleArray.length !== expectedMarbleArray.length) {\n    return false;\n  }\n  let pass = true;\n  for (const actualMarble of actualMarbleArray) {\n    if (!expectedMarbleArray.includes(actualMarble)) {\n      pass = false;\n      break;\n    }\n  }\n  return pass;\n}\n\ndeclare global {\n  namespace jest {\n    interface Matchers<R, T> {\n      toBeNotifications(notifications: TestMessage[]): void;\n\n      toBeSubscriptions(subscriptions: SubscriptionLog[]): void;\n\n      toHaveEmptySubscriptions(): void;\n    }\n  }\n}\n\nexpect.extend(customTestMatchers);\n","import { TestMessage } from 'rxjs/internal/testing/TestMessage';\nimport { SubscriptionLog } from 'rxjs/internal/testing/SubscriptionLog';\nimport '../jest/custom-matchers';\n\nexport type MessageOrSubscription = TestMessage[] | SubscriptionLog[];\n\nfunction expectedIsSubscriptionLogArray(\n  actual: MessageOrSubscription,\n  expected: MessageOrSubscription\n): expected is SubscriptionLog[] {\n  return (\n    (actual.length === 0 && expected.length === 0) || (expected.length !== 0 && expected[0] instanceof SubscriptionLog)\n  );\n}\n\nfunction actualIsSubscriptionsAndExpectedIsEmpty(\n  actual: MessageOrSubscription,\n  expected: MessageOrSubscription\n): actual is SubscriptionLog[] {\n  return expected.length === 0 && actual.length !== 0 && actual[0] instanceof SubscriptionLog;\n}\n\nexport function assertDeepEqual(actual: MessageOrSubscription, expected: MessageOrSubscription) {\n  if (!expected) return;\n  if (actualIsSubscriptionsAndExpectedIsEmpty(actual, expected)) {\n    expect(actual).toHaveEmptySubscriptions();\n  } else if (expectedIsSubscriptionLogArray(actual, expected)) {\n    expect(actual).toBeSubscriptions(expected);\n  } else {\n    expect(actual).toBeNotifications(expected);\n  }\n}\n","import { Observable } from 'rxjs';\nimport { TestMessage } from 'rxjs/internal/testing/TestMessage';\nimport { TestScheduler } from 'rxjs/internal/testing/TestScheduler';\n\nimport { assertDeepEqual } from './assert-deep-equal';\n\nexport class Scheduler {\n  public static instance: TestScheduler | null;\n\n  public static init(): void {\n    Scheduler.instance = new TestScheduler(assertDeepEqual);\n  }\n\n  public static get(): TestScheduler {\n    if (Scheduler.instance) {\n      return Scheduler.instance;\n    }\n    throw new Error('Scheduler is not initialized');\n  }\n\n  public static reset(): void {\n    Scheduler.instance = null;\n  }\n\n  public static materializeInnerObservable(observable: Observable<any>, outerFrame: number): TestMessage[] {\n    const scheduler = Scheduler.get();\n    // @ts-ignore\n    return scheduler.materializeInnerObservable(observable, outerFrame);\n  }\n}\n","import { Observable } from 'rxjs';\nimport { ColdObservable as RxJsColdObservable } from 'rxjs/internal/testing/ColdObservable';\nimport { SubscriptionLog } from 'rxjs/internal/testing/SubscriptionLog';\n\nimport { Scheduler } from './scheduler';\n\nexport class ColdObservable extends Observable<any> {\n  source: RxJsColdObservable<any>;\n  constructor(public marbles: string, public values?: any[], public error?: any) {\n    super();\n\n    this.source = Scheduler.get().createColdObservable(marbles, values, error);\n  }\n\n  getSubscriptions(): SubscriptionLog[] {\n    return this.source.subscriptions;\n  }\n}\n","import { Observable } from 'rxjs';\nimport { HotObservable as RxJsHotObservable } from 'rxjs/internal/testing/HotObservable';\nimport { SubscriptionLog } from 'rxjs/internal/testing/SubscriptionLog';\n\nimport { Scheduler } from './scheduler';\n\nexport class HotObservable extends Observable<any> {\n  source: RxJsHotObservable<any>;\n  constructor(public marbles: string, public values?: any[], public error?: any) {\n    super();\n\n    this.source = Scheduler.get().createHotObservable(marbles, values, error);\n  }\n\n  getSubscriptions(): SubscriptionLog[] {\n    return this.source.subscriptions;\n  }\n}\n","export function stripAlignmentChars(marbles: string) {\n  return marbles.replace(/^[ ]+/, '');\n}\n","import { ColdObservable } from './src/rxjs/cold-observable';\r\nimport { HotObservable } from './src/rxjs/hot-observable';\r\nimport { Scheduler } from './src/rxjs/scheduler';\r\nimport { stripAlignmentChars } from './src/rxjs/strip-alignment-chars';\r\n\r\nexport type ObservableWithSubscriptions = ColdObservable | HotObservable;\r\n\r\nexport { Scheduler } from './src/rxjs/scheduler';\r\n\r\ndeclare global {\r\n  namespace jest {\r\n    interface Matchers<R, T> {\r\n      toBeObservable(observable: ObservableWithSubscriptions): void;\r\n\r\n      toHaveSubscriptions(marbles: string | string[]): void;\r\n\r\n      toHaveNoSubscriptions(): void;\r\n\r\n      toBeMarble(marble: string): void;\r\n\r\n      toSatisfyOnFlush(func: () => void): void;\r\n    }\r\n  }\r\n}\r\n\r\nexport function hot(marbles: string, values?: any, error?: any): HotObservable {\r\n  return new HotObservable(stripAlignmentChars(marbles), values, error);\r\n}\r\n\r\nexport function cold(marbles: string, values?: any, error?: any): ColdObservable {\r\n  return new ColdObservable(stripAlignmentChars(marbles), values, error);\r\n}\r\n\r\nexport function time(marbles: string): number {\r\n  return Scheduler.get().createTime(stripAlignmentChars(marbles));\r\n}\r\n\r\nconst dummyResult = {\r\n  message: () => '',\r\n  pass: true\r\n};\r\n\r\nexpect.extend({\r\n\r\n  toHaveSubscriptions(actual: ObservableWithSubscriptions, marbles: string | string[]) {\r\n    const sanitizedMarbles = Array.isArray(marbles) ? marbles.map(stripAlignmentChars) : stripAlignmentChars(marbles);\r\n    Scheduler.get().expectSubscriptions(actual.getSubscriptions()).toBe(sanitizedMarbles);\r\n    return dummyResult;\r\n  },\r\n\r\n  toHaveNoSubscriptions(actual: ObservableWithSubscriptions) {\r\n    Scheduler.get().expectSubscriptions(actual.getSubscriptions()).toBe([]);\r\n    return dummyResult;\r\n  },\r\n\r\n  toBeObservable(actual, expected: ObservableWithSubscriptions) {\r\n    Scheduler.get().expectObservable(actual).toBe(expected.marbles, expected.values, expected.error);\r\n    return dummyResult;\r\n  },\r\n\r\n  toBeMarble(actual: ObservableWithSubscriptions, marbles: string) {\r\n    Scheduler.get().expectObservable(actual).toBe(stripAlignmentChars(marbles));\r\n    return dummyResult;\r\n  },\r\n\r\n  toSatisfyOnFlush(actual: ObservableWithSubscriptions, func: () => void) {\r\n    Scheduler.get().expectObservable(actual);\r\n    // tslint:disable:no-string-literal\r\n    const flushTests = Scheduler.get()['flushTests'];\r\n    flushTests[flushTests.length - 1].ready = true;\r\n    onFlush.push(func);\r\n    return dummyResult;\r\n  }\r\n});\r\n\r\nlet onFlush: (() => void)[] = [];\r\n\r\nbeforeEach(() => { Scheduler.init(); onFlush = []; });\r\nafterEach(() => {\r\n  Scheduler.get().flush();\r\n  while (onFlush.length > 0) {\r\n    // @ts-ignore\r\n    onFlush.shift()();\r\n  }\r\n  Scheduler.reset();\r\n});\r\n"],"sourceRoot":""}