!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jest-matcher-utils"),require("rxjs"),require("rxjs/internal/testing/SubscriptionLog"),require("jest-diff"),require("rxjs/internal/testing/TestScheduler"),require("expect/build/jasmineUtils")):"function"==typeof define&&define.amd?define("JestMarbles",["jest-matcher-utils","rxjs","rxjs/internal/testing/SubscriptionLog","jest-diff","rxjs/internal/testing/TestScheduler","expect/build/jasmineUtils"],e):"object"==typeof exports?exports.JestMarbles=e(require("jest-matcher-utils"),require("rxjs"),require("rxjs/internal/testing/SubscriptionLog"),require("jest-diff"),require("rxjs/internal/testing/TestScheduler"),require("expect/build/jasmineUtils")):t.JestMarbles=e(t["jest-matcher-utils"],t.rxjs,t["rxjs/internal/testing/SubscriptionLog"],t["jest-diff"],t["rxjs/internal/testing/TestScheduler"],t["expect/build/jasmineUtils"])}("undefined"!=typeof self?self:this,(function(t,e,n,r,i,o){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e){t.exports=o},function(t,e,n){t.exports=n(7)},function(t,e,n){"use strict";n.r(e);var r,i=n(1),o=n(4),u=n(2),c=n(5),s=n(3),a=n(0);!function(t){t.Completion="|",t.Error="#",t.TimeFrame="-",t.Subscription="^",t.Unsubscription="!",t.GroupStart="(",t.GroupEnd=")"}(r||(r={}));var f=function(){function t(t){this.start=t,this.marbles=""}return Object.defineProperty(t.prototype,"end",{get:function(){return this.start+this.marbles.length},enumerable:!0,configurable:!0}),t}(),p={},l={N:p,C:r.Completion,E:r.Error},b=function(){function t(){}return t.marblize=function(e){for(var n=t.getNotificationEvents(e),i="",o=0,u=0;o<n.length;u=n[o].end,o++)i=""+i+(r.TimeFrame.repeat(n[o].start-u)+n[o].marbles);return i},t.marblizeSubscriptions=function(t){return t.map((function(t){return r.TimeFrame.repeat(t.subscribedFrame/10)+r.Subscription+r.TimeFrame.repeat((t.unsubscribedFrame-t.subscribedFrame)/10-1)+r.Unsubscription}))},t.getNotificationEvents=function(e){var n=e.reduce((function(e,n){return e[n.frame]||(e[n.frame]=new f(n.frame/10)),e[n.frame].marbles+=t.extractMarble(n),e}),{}),r=Object.keys(n).map((function(t){return n[t]}));return t.encloseGroupEvents(r),r},t.extractMarble=function(t){var e=l[t.notification.kind];return e===p&&(e=t.notification.value),e},t.encloseGroupEvents=function(t){t.forEach((function(t){t.marbles.length>1&&(t.marbles=""+r.GroupStart+t.marbles+r.GroupEnd)}))},t}();function d(t){var e=t.notification.value;return"string"==typeof e&&1===e.length||void 0!==e&&1===JSON.stringify(e).length}var v={toBeNotifications:function(t,e){var n=t,r=e;(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every((function(t){return t.filter((function(t){return"N"===t.notification.kind})).every(d)}))})(t,e)&&(n=b.marblize(t),r=b.marblize(e));var i=Object(c.equals)(n,r);return{actual:t,message:i?function(){return Object(a.matcherHint)(".not.toBeNotifications")+"\n\nExpected notifications to not be:\n  "+Object(a.printExpected)(r)+"\nBut got:\n  "+Object(a.printReceived)(n)}:function(){var t=s(r,n,{expand:!0});return Object(a.matcherHint)(".toBeNotifications")+"\n\nExpected notifications to be:\n  "+Object(a.printExpected)(r)+"\nBut got:\n  "+Object(a.printReceived)(n)+(t?"\n\nDifference:\n\n"+t:"")},pass:i}},toBeSubscriptions:function(t,e){var n=b.marblizeSubscriptions(t),r=b.marblizeSubscriptions(e),i=function(t,e){if(t.length!==e.length)return!1;for(var n=!0,r=0,i=t;r<i.length;r++){var o=i[r];if(!e.includes(o)){n=!1;break}}return n}(n,r);return{actual:t,message:i?function(){return Object(a.matcherHint)(".not.toHaveSubscriptions")+"\n\nExpected observable to not have the following subscription points:\n  "+Object(a.printExpected)(r)+"\nBut got:\n  "+Object(a.printReceived)(n)}:function(){var t=s(r,n,{expand:!0});return Object(a.matcherHint)(".toHaveSubscriptions")+"\n\nExpected observable to have the following subscription points:\n  "+Object(a.printExpected)(r)+"\nBut got:\n  "+Object(a.printReceived)(n)+(t?"\n\nDifference:\n\n"+t:"")},pass:i}},toHaveEmptySubscriptions:function(t){var e,n=!(t&&t.length>0);return t&&t.length>0&&(e=b.marblizeSubscriptions(t)),{actual:t,message:n?function(){return Object(a.matcherHint)(".not.toHaveNoSubscriptions")+"\n\nExpected observable to have at least one subscription point, but got nothing"+Object(a.printReceived)("")}:function(){return Object(a.matcherHint)(".toHaveNoSubscriptions")+"\n\nExpected observable to have no subscription points\nBut got:\n  "+Object(a.printReceived)(e)+"\n\n"},pass:n}}};function g(t,e){e&&(!function(t,e){return 0===e.length&&0!==t.length&&t[0]instanceof u.SubscriptionLog}(t,e)?!function(t,e){return 0===t.length&&0===e.length||0!==e.length&&e[0]instanceof u.SubscriptionLog}(t,e)?expect(t).toBeNotifications(e):expect(t).toBeSubscriptions(e):expect(t).toHaveEmptySubscriptions())}expect.extend(v);var m,h=function(){function t(){}return t.init=function(){t.instance=new o.TestScheduler(g)},t.get=function(){if(t.instance)return t.instance;throw new Error("Scheduler is not initialized")},t.reset=function(){t.instance=null},t.materializeInnerObservable=function(e,n){return t.get().materializeInnerObservable(e,n)},t}(),x=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),j=function(t){function e(e,n,r){var i=t.call(this)||this;return i.marbles=e,i.values=n,i.error=r,i.source=h.get().createColdObservable(e,n,r),i}return x(e,t),e.prototype.getSubscriptions=function(){return this.source.subscriptions},e}(i.Observable),O=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.marbles=e,i.values=n,i.error=r,i.source=h.get().createHotObservable(e,n,r),i}return O(e,t),e.prototype.getSubscriptions=function(){return this.source.subscriptions},e}(i.Observable);function S(t){return t.replace(/^[ ]+/,"")}function E(t,e,n){return new y(S(t),e,n)}function _(t,e,n){return new j(S(t),e,n)}function B(t){return h.get().createTime(S(t))}n.d(e,"hot",(function(){return E})),n.d(e,"cold",(function(){return _})),n.d(e,"time",(function(){return B})),n.d(e,"Scheduler",(function(){return h}));var H={message:function(){return""},pass:!0};expect.extend({toHaveSubscriptions:function(t,e){var n=Array.isArray(e)?e.map(S):S(e);return h.get().expectSubscriptions(t.getSubscriptions()).toBe(n),H},toHaveNoSubscriptions:function(t){return h.get().expectSubscriptions(t.getSubscriptions()).toBe([]),H},toBeObservable:function(t,e){return h.get().expectObservable(t).toBe(e.marbles,e.values,e.error),H},toBeMarble:function(t,e){return h.get().expectObservable(t).toBe(S(e)),H},toSatisfyOnFlush:function(t,e){h.get().expectObservable(t);var n=h.get().flushTests;return n[n.length-1].ready=!0,q.push(e),H}});var q=[];beforeEach((function(){h.init(),q=[]})),afterEach((function(){for(h.get().flush();q.length>0;)q.shift()();h.reset()}))}])}));
//# sourceMappingURL=jest-marbles.min.js.map